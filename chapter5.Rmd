--- 
title_meta  : 第五章
title       : 資料框
description : 實務上你面對的多數資料集都是儲存為資料框的格式，學完本章節之後，你將可以建立資料框、選擇資料框中有興趣的部分以及根據某一個變數排序資料框。

--- type:NormalExercise xp:100 skills:1 key:697536131763a67337978935d895a05e2ed6bfee
## 資料框是什麼？

矩陣中所有的元素都應該是相同類型的，記得你在前一個章節中建立的星際大戰票房矩陣嗎？矩陣裡面的元素全部都是數值。

當你做市場調查時，問卷中常常有問題像是：
- 請問你結婚了嗎？回答為是/否的問題(`邏輯`)
- 請問你的年紀為？(`數值`)
- 對於本產品的意見？或其他開放式問題(`字元`)
- ...

因此問卷的調查結果通常包含了不同類型的資料。 

資料框中將觀測值儲存為列，將變數儲存為欄，這與其他統計軟體像是SAS或SPSS的概念是相似的。

*** =instructions
按下'Submit Answer'。將內建的範例資料框[`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars)印出在R Console中。

*** =hint
按下'Submit Answer'並觀察結果！

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# 印出內建的R資料框
mtcars 
```

*** =solution
```{r}
# 印出內建的R資料框
mtcars 
```

*** =sct
```{r}
test_output_contains("mtcars", incorrect_msg = "\u4e0d\u9700\u8981\u66f4\u6539\u4efb\u4f55\u7a0b\u5f0f\uff0c\u78ba\u5b9a\u4f60\u6709\u5c07 `mtcars` \u5370\u51fa\u3002")
success_msg("\u592a\u68d2\u4e86\uff0c\u524d\u9032\u4e0b\u4e00\u500b\u7df4\u7fd2\uff01")
```


--- type:NormalExercise xp:100 skills:1 key:c3f245836ce0b7473355c0278265f0b16f18a4b7
## 很快地看看資料集

哇，真的有很多車！ 

你常常需要分析龐大的資料集，這時候你的第一件事應該是對資料結構與主要元素有清晰的認知，先觀察小部份的資料集是很有用的。

在R中可以使用[`head()`](http://www.rdocumentation.org/packages/utils/functions/head)函數幫助你呈現資料框的前幾個觀測值，相同地，[`tail()`](http://www.rdocumentation.org/packages/utils/functions/head)函數可以印出資料框的最後幾個觀測值。

[`head()`](http://www.rdocumentation.org/packages/utils/functions/head)與[`tail()`](http://www.rdocumentation.org/packages/utils/functions/head)函數都會將欄位的名稱印出。

*** =instructions
對[`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars)資料框使用[`head()`](http://www.rdocumentation.org/packages/utils/functions/head)函數來看看它的欄位名稱與前幾列觀測值。

*** =hint
`head(mtcars)` 會將 `mtcars` 的前幾列印出。

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# 對mtcars呼叫head()

```

*** =solution
```{r}
# 對mtcars呼叫head()
head(mtcars)
```

*** =sct
```{r}
test_function("head", "x", incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u6709\u5c0d `mtcars` \u4f7f\u7528 `head()` \u51fd\u6578\uff1f")
test_output_contains("head(mtcars)", incorrect_msg = "\u53ea\u9700\u8981\u5c07\u547c\u53eb `head()` \u7684\u7d50\u679c\u5370\u51fa\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u6307\u6d3e\u65b0\u8b8a\u6578\u3002")
success_msg("\u592a\u68d2\u4e86\uff0c\u8b93\u6211\u5011\u770b\u770b\u8cc7\u6599\u96c6\u4e2d\u6709\u4ec0\u9ebc\u8cc7\u6599\uff0c\u4f8b\u5982 `hp` \u4ee3\u8868\u8eca\u5b50\u7684\u99ac\u529b\uff0cDatsun\u5728\u5448\u73fe\u51fa\u4f86\u76846\u8f1b\u8eca\u5b50\u4e2d\u662f\u99ac\u529b\u6700\u4f4e\u7684\u90a3\u8f1b\uff0c\u5728R Console\u8f38\u5165 `?mtcars` \u53ef\u4ee5\u95b1\u8b80\u8a73\u7d30\u7684\u8b8a\u6578\u5b9a\u7fa9\u8207\u985e\u578b\uff0c\u524d\u9032\u4e0b\u4e00\u500b\u7df4\u7fd2\uff01");
```


--- type:NormalExercise xp:100 skills:1 key:44c05f378266cbc25079ec804787fdc09e111aa0
## 觀察一下結構

還有另外一種常用的方式可以幫助你快速地瞭解資料概觀，那就是使用[`str()`](http://www.rdocumentation.org/packages/utils/functions/str)函數，[`str()`](http://www.rdocumentation.org/packages/utils/functions/str)函數顯示資料集的結構，告訴你資料框的資訊有：

- 觀測值總計(32種車型)
- 變數總計(11種車輛資訊)
- 變數名稱清單(`mpg`, `cyl` ... )
- 變數的資料類型(`數值`)
- 前幾個觀測值

當你拿到一個新資料集或資料框，在你開始做分析之前通常會使用[`str()`](http://www.rdocumentation.org/packages/utils/functions/str)函數了解資料的樣態。

*** =instructions
觀察[`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars)的結構，並確定你有觀察到跟前述相同的觀測值個數、變數總計與資料類別。

*** =hint
對[`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars)使用[`str()`](http://www.rdocumentation.org/packages/utils/functions/str)函數。

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# 查看mtcars的結構
```

*** =solution
```{r}
# 查看mtcars的結構
str(mtcars)
```

*** =sct
```{r}
test_output_contains("str(mtcars)", incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u6709\u5c0d `mtcars` \u4f7f\u7528 `str()`\uff1f")
success_msg("\u505a\u5f97\u597d\uff0c\u4f60\u770b\u5230\u4e86\u8aaa\u660e\u4e2d\u7684\u8cc7\u8a0a\u55ce\uff1f\u524d\u9032\u4e0b\u4e00\u500b\u7df4\u7fd2\uff01")
```


--- type:NormalExercise xp:100 skills:1 key:1599e175505f5980064369d4fea9b77ce1574b4e
## 建立一個資料框 

用內建的資料集一點都不有趣對吧！接下來的練習我們要使用你自己建立的資料框，讓我們穿上太空衣，做一點星際探索吧！

首先我們來建立一個描述太陽系八個行星特性的資料框，根據你的好友Buzz的說法，星球的主要特性有：

- 星球種類(陸地或氣體)。
- 星球相對於地球的直徑。
- 星球相對於地球的自轉頻率。
- 星球是否有環(TRUE或FALSE)。

經過在維基百科[Wikipedia](http://en.wikipedia.org/wiki/Planet)上的精密研究以後，你很有自信地建立了這些向量： `name` 、 `type` 、 `diameter` 、 `rotation` 與 `rings`，建立這些向量的程式碼已經寫好在編輯區中。

使用[`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame)函數建立資料框，這些向量都會成為資料框中的欄位，它們的長度都相同，但是資料格式有所不同。

*** =instructions
使用[`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame)函數建立資料框，將`name` 、 `type` 、 `diameter` 、 `rotation` 與 `rings` 做為參數放入 `data.frame()`並將建立的資料框命名為 `planets_df`。

*** =hint
你的`data.frame()`函數會長得類似像這樣：
```
data.frame(planets, type, diameter)
```
你可以完成它嗎？

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# 宣告向量
name <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# 由這些向量建立資料框
planets_df <-

```

*** =solution
```{r}
# 宣告向量
name <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# 由這些向量建立資料框
planets_df <- data.frame(name, type, diameter, rotation, rings)
```

*** =sct
```{r}
msg = "\u4e0d\u9700\u8981\u66f4\u6539\u5411\u91cf\u7684\u5ba3\u544a\uff0c\u52a0\u5165 `data.frame()` \u5efa\u7acb `planets_df`\u3002"
test_object("name", undefined_msg = msg, incorrect_msg = msg)
test_object("type", undefined_msg = msg, incorrect_msg = msg)
test_object("diameter", undefined_msg = msg, incorrect_msg = msg)
test_object("rotation", undefined_msg = msg, incorrect_msg = msg)
test_object("rings", undefined_msg = msg, incorrect_msg = msg)

test_object("planets_df",
            incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u6709\u4f7f\u7528 `data.frame()` \u5efa\u7acb `planets_df`\uff0c\u4e26\u78ba\u8a8d\u5728 `data.frame()` \u51fd\u6578\u4e2d\u7528\u6b63\u78ba\u7684\u9806\u5e8f\u5c07\u6240\u6709\u7684\u5411\u91cf\u7576\u4f5c\u53c3\u6578\u5beb\u5165\uff1a `name` \u3001 `type` \u3001 `diameter` \u3001 `rotation` \u8207 `rings`\u3002")

success_msg("\u505a\u5f97\u597d\uff0c\u524d\u9032\u4e0b\u4e00\u500b\u7df4\u7fd2\uff0c\u968e\u4e0b\u4f86\u6211\u5011\u8981\u6aa2\u8996\u4f60\u525b\u5efa\u7acb\u597d\u7684\u8cc7\u6599\u6846\uff01");
```


--- type:NormalExercise xp:100 skills:1 key:72d24b916b842527b40bd19ff3093b823980c234
## 建立一個資料框 (2)

`planets_df` 資料框已經載入至工作區，它有8個觀測值與5個欄位，你可以直接使用它。

*** =instructions
使用[`str()`](http://www.rdocumentation.org/packages/utils/functions/str)函數來檢視 `planets_df` 的結構與變數。

*** =hint
`planets_df` 已經載入至工作區，直接於編輯區輸入 `str(planets_df)` 即可。

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# 檢查planets_df的結構
```

*** =solution
```{r}
# 檢查planets_df的結構
str(planets_df)
```

*** =sct
```{r}
msg = "\u4e0d\u9700\u8981\u79fb\u9664\u6216\u8986\u5beb\u5df2\u7d93\u8f09\u5165\u81f3\u5de5\u4f5c\u5340\u7684 `planets_df` \u8cc7\u6599\u6846\uff01"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_output_contains("str(planets_df)", incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u6709\u4f7f\u7528 `str()` \u4f86\u986f\u793a `planets_df` \u7684\u7d50\u69cb\uff1f")
success_msg("\u592a\u68d2\u4e86\uff0c\u4f60\u73fe\u5728\u5c0d `planets_df` \u6709\u6e05\u695a\u7684\u4e86\u89e3\uff0c\u63a5\u4e0b\u4f86\u7684\u7df4\u7fd2\u5c07\u8b93\u4f60\u5b78\u6703\u5982\u4f55\u5f9e\u8cc7\u6599\u6846\u4e2d\u9078\u64c7\u5143\u7d20\uff01")
```


--- type:NormalExercise xp:100 skills:1 key:a6eeec0beaa5b270c1e9fd1fd4bf285ac5363e1a
## 從資料框中選擇元素

與向量及矩陣相似，你可以使用中括號 `[ ]` 從資料框中選擇，並用逗號分別指定要選擇的列與欄，例如：

- `my_df[1,2]` 將 `my_df` 第一列第二欄的元素選出。
- `my_df[1:3,2:4]` 將 `my_df` 第一到三列與第二至四欄選出。

有時候你想要選擇整列或整欄的所有元素，例如使用 `my_df[1, ]` 可以將第一列所有的元素選出，接下來我們將對 `planets_df` 練習這些技巧！

*** =instructions
- 從 `planets_df` 的第一列第三欄將水星的直徑選出，並印出結果。
- 從 `planets_df` 的第四列將火星所有的資訊選出，並印出結果。

*** =hint
利用 `planets_df[2,3]` 可以將金星的直徑選出，如果是水星呢？

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# planets_df資料框已經預先載入

# 印出水星的直徑(第一列第三欄)


# 印出火星的資訊(第四列)

```

*** =solution
```{r}
# planets_df資料框已經預先載入

# 印出水星的直徑(第一列第三欄)

# 印出火星的資訊(第四列)
planets_df[4, ]
```

*** =sct
```{r}
msg = "\u4e0d\u9700\u8981\u66f4\u6539\u6216\u8986\u5beb `planets_df` \u8cc7\u6599\u6846\u3002"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_output_contains("planets_df[1,3]", incorrect_msg = "\u78ba\u8a8d\u4f60\u662f\u5426\u6709\u5229\u7528 `[1,3]` \u9078\u64c7\u4e26\u5370\u51fa\u6c34\u661f\u7684\u76f4\u5f91\uff1f")
test_output_contains("planets_df[4, ]", incorrect_msg = "\u78ba\u8a8d\u4f60\u662f\u5426\u6709\u5229\u7528 `[4,]` \u9078\u64c7\u4e26\u5370\u51fa\u706b\u661f\u7684\u6240\u6709\u8cc7\u8a0a\uff1f")
success_msg("\u592a\u68d2\u4e86\uff0c\u9664\u4e86\u7528\u7d22\u5f15\u503c\u4ee5\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528\u6b04\u4f4d\u540d\u7a31\u5f9e\u8cc7\u6599\u6846\u4e2d\u9078\u51fa\u5143\u7d20\uff0c\u524d\u9032\u4e0b\u4e00\u500b\u7df4\u7fd2\uff01")
```


--- type:NormalExercise xp:100 skills:1 key:1b1be7e1473994d9d6762816f15ea282787be250
## 從資料框中選擇元素 (2)

除了使用索引值從資料框中選擇元素，你也可以使用變數名稱進行選擇。 

如果你想選擇 `type` 欄位的前三個元素，你可以這樣做

```
planets_df[1:3,1]
```

這個做法有一個缺點就是你必須要去查詢 `type` 在第幾欄，當你的變數變多時，這個做法就會變得很困難，因此用變數名稱就會顯得比較輕鬆：

```
planets_df[1:3,"type"]
```

*** =instructions
從 `planets_df` 中選擇並印出 `"diameter"` 的前5個值。

*** =hint
你可以使用 `planets_df[1:5, ...]` 選出前5個值，將 `...` 替換成 `"diameter"` 這個欄位。

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# planets_df資料框已經預先載入

# 選出diameter欄位的前5個值

```

*** =solution
```{r}
# planets_df資料框已經預先載入

# 選出diameter欄位的前5個值
planets_df[1:5, "diameter"]
```

*** =sct
```{r}
msg = "\u4e0d\u9700\u8981\u79fb\u9664\u6216\u8986\u5beb `planets_df` \u8cc7\u6599\u6846\u3002"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_output_contains("planets_df[1:5, \"diameter\"]", incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u6709\u5229\u7528 `[1:5, \"diameter\"]` \u9078\u51fa\u76f4\u5f91\u6b04\u4f4d\u7684\u524d5\u500b\u6578\u503c\u4e26\u5370\u51fa\u4f86\uff1f")
success_msg("\u592a\u597d\u4e86\uff0c\u524d\u9032\u4e0b\u4e00\u500b\u7df4\u7fd2\uff01")
```


--- type:NormalExercise xp:100 skills:1 key:c332cd7e7e46daa391edea8aea961414c8c8d0ce
## 有環的星球

你常常需要選出資料框中的某個特定欄位，假如要選出 `diameter` 變數，用以下兩列指令都可以：

```
planets_df[,3]
planets_df[,"diameter"]
```

其實還有使用 `$` 符號的簡便方法：

```
planets_df$diameter
```

*** =instructions
- 使用 `$` 符號把變數 `rings` 從 `planets_df` 選擇出來並指派給 `rings_vector`。
- 印出 `rings_vector` 看看有沒有做對。

*** =hint
使用 `planets_df$diameter` 可以將 `diameter` 欄位從 `planets_df` 中選出，那麼應該如何將 `rings` 欄位選出呢？

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# planets_df資料框已經預先載入

# 從planets_df選出變數rings 
rings_vector <- 
  
# 印出rings_vector
```

*** =solution
```{r}
# planets_df資料框已經預先載入

# 從planets_df選出變數rings
rings_vector <- planets_df$rings

# 印出rings_vector
rings_vector
```

*** =sct
```{r}
msg = "\u4e0d\u9700\u8981\u66f4\u6539\u6216\u8986\u5beb `planets_df` \u8cc7\u6599\u6846\u3002"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_object("rings_vector",
            incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u5229\u7528 `$rings` \u5c07\u8b8a\u6578 `rings` \u5f9e `planets_df` \u4e2d\u9078\u51fa\u4e26\u6307\u6d3e\u7d66 `rings_vector`\u3002")
test_output_contains("rings_vector", incorrect_msg = "\u5225\u5fd8\u4e86\u5728\u5efa\u7acb\u5411\u91cf\u5f8c\u5c07 `rings_vector` \u5370\u51fa\uff01")
success_msg("\u592a\u597d\u4e86\uff0c\u524d\u9032\u4e0b\u4e00\u500b\u7df4\u7fd2\u4e26\u5b78\u7fd2\u53e6\u5916\u4e00\u500b\u9078\u64c7\u5143\u7d20\u7684\u65b9\u5f0f\uff01")
```


--- type:NormalExercise xp:100 skills:1 key:0aa1fd7d080afe1bb1031562e8004121943632c6
## 有環的星球 (2)

回憶一下高中教材你可能想起太陽系中有些行星有環而有些沒有，但你大概記不起他們的名稱，更別說他們的自轉頻率...等。

R可以幫助你辦到嗎？

在R Console輸入 `rings_vector` 你可以得到：

```
[1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
```

這個結果表示前四個觀測值(或星球)沒有環(`FALSE`)，但另外四個有環(`TRUE`)，讓我們利用 `rings_vector` 將有環的四個星球選出來。 

*** =instructions
右方編輯區的程式將有環的星球名稱選出，修改程式改為將有環的星球_所有_欄位都選出。

*** =hint
記得利用 `[rings_vector, ]` 選出_所有_欄位，將欄位的部分留白就可以。

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
rings_vector <- planets_df$rings
```

*** =sample_code
```{r}
# planets_df與rings_vector已經預先載入

# 修改程式選擇有環星球的所有欄位
planets_df[rings_vector, "name"]
```

*** =solution
```{r}
# planets_df與rings_vector已經預先載入

# 修改程式選擇有環星球的所有欄位
planets_df[rings_vector, ]
```

*** =sct
```{r}
msg <- "\u4e0d\u9700\u8981\u79fb\u9664\u6216\u8986\u5beb `planets_df` \u6216 `rings_vector`\u3002"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_object("rings_vector", undefined_msg = msg, incorrect_msg = msg)
test_output_contains('planets_df[rings_vector, ]', incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u6709\u4f7f\u7528 `planets_df[rings_vector, ]` \u9078\u51fa\u6709\u74b0\u661f\u7403\u7684_\u6240\u6709_\u6b04\u4f4d\uff1f\u9017\u865f\u5f88\u91cd\u8981\uff0c\u4e0d\u8981\u5fd8\u8a18\u4e86\uff01")
success_msg("\u592a\u68d2\u4e86\uff0c\u9019\u500b\u89e3\u6cd5\u6709\u9ede\u9ebb\u7169\uff0c\u4e0b\u4e00\u500b\u7df4\u7fd2\u6703\u6559\u4f60\u4e00\u500b\u66f4\u7c21\u6f54\u7684\u65b9\u5f0f\uff01")
```


--- type:NormalExercise xp:100 skills:1 key:9b873ed27e9df18a217699041950ecd20691eaf1
## 有環的星球但簡單些

想想在前一個練習中學會了什麼？你根據有環或者沒有環從 `planets_df` 中選出了資料框子集，這真的超強的，也許美國太空總署已經在偷偷討論要招募你了喔！

讓我們來認識一個更高明的[`subset()`](http://www.rdocumentation.org/packages/base/functions/subset)函數，[`subset()`](http://www.rdocumentation.org/packages/base/functions/subset)函數可以更快速地做到前面練習所做到的事情。

```
subset(my_df, subset = some_condition)
``` 

[`subset()`](http://www.rdocumentation.org/packages/base/functions/subset)函數中的第一個參數指定了要被篩選的資料，第二個參數則要告訴R篩選的邏輯為何。 

以下的程式會得到跟前一個練習一樣的結果，但這次你不需要另外宣告 `rings_vector`。

```
subset(planets_df, subset = rings)
``` 

*** =instructions
對 `planets_df` 使用 `subset()` 將直徑比地球小的星球選出來，由於直徑其實是個相對量值，你的條件應該要下 `diameter < 1`。

*** =hint
稍微修改一下 `subset(planets_df, subset = ...)` 將 `...` 改為？

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# planets_df資料框已經預先載入

# 選出直徑<1的星球

```

*** =solution
```{r}
# planets_df資料框已經預先載入

# 選出直徑<1的星球
subset(planets_df, subset = diameter < 1)
```

*** =sct
```{r}
msg = "\u4e0d\u9700\u8981\u79fb\u9664\u6216\u8986\u5beb `planets_df` \u8cc7\u6599\u6846\u3002"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_correct({
  test_output_contains("subset(planets_df, subset = diameter < 1)", incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u6709\u5728 `subset()` \u51fd\u6578\u4e2d\u6b63\u78ba\u6307\u6d3e\u53c3\u6578 `subset = ...`\u3002\u689d\u4ef6\u61c9\u8a72\u8981\u4e0b `diameter < 1` \u4e26\u5c07\u7d50\u679c\u5370\u51fa\u3002")  
}, {
  test_function("subset", args = "x", 
                not_called_msg = "\u78ba\u8a8d\u662f\u5426\u6709\u4f7f\u7528 `subset()` \u51fd\u6578\uff1f",
                incorrect_msg = " `subset()` \u51fd\u6578\u4e2d\u7684\u7b2c\u4e00\u500b\u53c3\u6578\u61c9\u8a72\u70ba `planets_df`\u3002")
})
success_msg("\u592a\u68d2\u4e86\uff0c `subset()` \u4e0d\u50c5\u5f88\u7c21\u6f54\uff0c\u5b83\u4e5f\u80fd\u5920\u8b93\u8b80\u8005\u66f4\u4e86\u89e3\u4f60\u7684\u7a0b\u5f0f\uff0c\u524d\u9032\u4e0b\u4e00\u500b\u7df4\u7fd2\uff01");
```


--- type:NormalExercise xp:100 skills:1 key:2397d0f7cdf728961c9f5b8208c3b2694e20e2df
## 排序

人們總是很喜歡排名，像是世界上最好的大學、最有影響力的電影明星或者最像007情報員的人。

你可以根據某個變數排序你的資料，在R中你需要使用[`order()`](http://www.rdocumentation.org/packages/base/functions/order)函數。

[`order()`](http://www.rdocumentation.org/packages/base/functions/order)函數會回傳投入變數的排序順位，例如：

```
> a <- c(100, 10, 1000)
> order(a)
[1] 2 1 3
```

10是最小的元素，所以回傳結果的第二個元素為1，而100是第二小的元素，故回傳結果的第一個元素為2。

這表示我們可以利用 `order(a)` 的輸出重洗 `a` 的順序：
    
```
> a[order(a)]
[1]   10  100 1000
``` 

*** =instructions
在R Console體驗一下[`order()`](http://www.rdocumentation.org/packages/base/functions/order)函數，準備好後按下'Submit Answer'。

*** =hint
在R Console中體驗一下[`order()`](http://www.rdocumentation.org/packages/base/functions/order)函數！

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# 在R Console中玩玩order函數
```

*** =solution
```{r}
# 在R Console中玩玩order函數
```

*** =sct
```{r}
success_msg("\u592a\u68d2\u4e86\uff0c\u8b93\u6211\u5011\u4f86\u4f7f\u7528 `order()` \u51fd\u6578\u4f86\u6392\u5e8f\u4f60\u7684\u8cc7\u6599\u6846\uff01")
```


--- type:NormalExercise xp:100 skills:1 key:81baabbbb256ac67de6d584ee37cfa218566f54a
## 排序你的資料框

現在你了解[`order()`](http://www.rdocumentation.org/packages/base/functions/order)函數，接下來你可以依據 `diameter` 欄位排序資料框，從最小的星球排到最大的星球。

*** =instructions
- 對 `planets_df$diameter` (`planets_df` 的 `diameter`欄位) 使用 `order()` 並將結果存為 `positions`。
- 利用 `positions` 向量作為中括號裡的列數索引重洗 `planets_df` ，保留所有的欄位並將結果印出。

*** =hint
- 利用 `order(planets_df$diameter)` 建立 `positions`。
- 在中括號中使用 `positions` 例如 `planets_df[...]` ，你知道在 `...` 中該填什麼？

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# planets_df已經預先載入

# 使用order()建立positions
positions <-  

# 使用positions排序planets_df

```

*** =solution
```{r}
# planets_df已經預先載入

# 使用order()建立positions
positions <- order(planets_df$diameter)

# 使用positions排序planets_df
planets_df[positions, ]
```

*** =sct
```{r}
msg = "\u4e0d\u9700\u8981\u79fb\u9664\u6216\u8986\u5beb `planets_df` \u8cc7\u6599\u6846\uff01"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_object("positions",
            incorrect_msg = "\u78ba\u8a8d\u662f\u5426\u4f7f\u7528 `sort(planets_df$diameter)` \u6b63\u78ba\u8a08\u7b97 `positions`\uff1f")
test_output_contains("planets_df[positions,]",
                     incorrect_msg = "\u4f7f\u7528 `planets_df[positions, ]` \u4f86\u6392\u5e8f `planets_df` \uff0c\u4e2d\u62ec\u865f\u88e1\u7684\u9017\u865f\u5f88\u91cd\u8981\uff01")
success_msg("\u592a\u5b8c\u7f8e\u4e86\uff0c\u9019\u662f\u8cc7\u6599\u6846\u7684\u6700\u5f8c\u4e00\u500b\u7df4\u7fd2\uff0c\u8a18\u5f97\u8cc7\u6599\u6846\u5728R\u4e2d\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u672a\u4f86\u4f60\u5c07\u5f88\u5e38\u78b0\u5230\u5b83\uff0c\u53e6\u5916\u4e00\u500b\u5e38\u898b\u7684\u8cc7\u6599\u683c\u5f0f\u662f\u6e05\u55ae\uff0c\u662f\u6211\u5011\u4e0b\u4e00\u7ae0\u8981\u5b78\u7fd2\u7684\u4e3b\u984c\uff01")
```


